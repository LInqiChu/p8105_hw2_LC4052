---
title: "p8105_hw2_LC4052"
Author: "Linqi Chu"
output: github_document
date: "2025-09-28"
---

```{r}
library(tidyverse)
library(dplyr)
library(readxl)

```


# Problem 1

## Clean the data in pols-month.csv

```{r}
pols_month = 
  read_csv("./fivethirtyeight_datasets/pols-month.csv",
           na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  separate(mon, c("year", "month","day")) |>
  mutate(
    month = month.name[as.integer(month)],
    president = ifelse(prez_gop == 1, "gop", "dem")
  )|>
  select(-prez_dem, -prez_gop, -day)

```


## Clean the data in snp.csv

```{r}
snp_df = 
  read_csv("./fivethirtyeight_datasets/snp.csv",
           na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  separate(date, c("month", "day","year")) |>
  mutate(
    month = month.name[as.integer(month)],
    year = as.integer(year),
    year = ifelse(year < 50,
                 2000 + year,
                 1900 + year),
    year = as.character(year)) |>
  select(-day) |>
  relocate(year, month, .before = everything()) |> 
  arrange(year, month)


```


## Tidy the unemployment data

```{r}
unemployment_df = 
  read_csv("./fivethirtyeight_datasets/unemployment.csv",
           na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = "month", 
    values_to = "unemployment(%)") |>
  mutate(
    month = factor(month, 
                      levels = c("jan","feb","mar","apr","may","jun",
                                 "jul","aug","sep","oct","nov","dec"),
                      labels = month.name),
    year = as.character(year))

```


## Join the datasets by merging snp into pols, and merging unemployment into the result.

```{r}
pols_df = 
  left_join(pols_month, snp_df, by = c("year","month")) |>
  left_join(unemployment_df, by = c("year","month"))

```


## Description

```{r}
names(pols_month)
names(snp_df)
names(unemployment_df)
names(pols_df)

```

Pols-month contains variables:"year", "month", "gov_gop", "sen_gop", "rep_gop", "gov_dem", "sen_dem", "rep_dem" and "president".
Snp_df contains variables: "year", "month" and "close".
Unemployment_df contains variables: "year", "month" and "unemployment(%)".

The resulting dataset spans from 1947 to 2015 and contains 822 observations, each with 11 features.
It contains variables: "year", "month", "gov_gop", "sen_gop", "rep_gop", "gov_dem", "sen_dem", "rep_dem", "president", "close" and "unemployment(%)".




# Problem 2

## Clean the Mr. Trash Wheel sheet:

```{r}
mrtrash_df = 
  read_excel("./trash_collection_data/202409 Trash Wheel Collection Data.xlsx",
             sheet = "Mr. Trash Wheel",
             skip = 1,
             na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  filter(!is.na(dumpster) & !is.na(weight_tons)) |>
  mutate(sports_balls = as.integer(round(sports_balls)))





```







```{r}







```



```{r}








```






```{r}

```







# Problem 3

```{r}









```




