p8105_hw2_LC4052
================
2025-09-28

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.2
    ## ✔ ggplot2   3.5.2     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(dplyr)
library(readxl)
```

# Problem 1

## Clean the data in pols-month.csv

``` r
pols_month = 
  read_csv("./fivethirtyeight_datasets/pols-month.csv",
           na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  separate(mon, c("year", "month","day")) |>
  mutate(
    month = month.name[as.integer(month)],
    president = ifelse(prez_gop == 1, "gop", "dem")
  )|>
  select(-prez_dem, -prez_gop, -day)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Clean the data in snp.csv

``` r
snp_df = 
  read_csv("./fivethirtyeight_datasets/snp.csv",
           na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  separate(date, c("month", "day","year")) |>
  mutate(
    month = month.name[as.integer(month)],
    year = as.integer(year),
    year = ifelse(year < 50,
                 2000 + year,
                 1900 + year),
    year = as.character(year)) |>
  select(-day) |>
  relocate(year, month, .before = everything()) |> 
  arrange(year, month)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Tidy the unemployment data

``` r
unemployment_df = 
  read_csv("./fivethirtyeight_datasets/unemployment.csv",
           na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = "month", 
    values_to = "unemployment(%)") |>
  mutate(
    month = factor(month, 
                      levels = c("jan","feb","mar","apr","may","jun",
                                 "jul","aug","sep","oct","nov","dec"),
                      labels = month.name),
    year = as.character(year))
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Join the datasets by merging snp into pols, and merging unemployment into the result.

``` r
pols_df = 
  left_join(pols_month, snp_df, by = c("year","month")) |>
  left_join(unemployment_df, by = c("year","month"))
```

## Description

``` r
names(pols_month)
```

    ## [1] "year"      "month"     "gov_gop"   "sen_gop"   "rep_gop"   "gov_dem"  
    ## [7] "sen_dem"   "rep_dem"   "president"

``` r
names(snp_df)
```

    ## [1] "year"  "month" "close"

``` r
names(unemployment_df)
```

    ## [1] "year"            "month"           "unemployment(%)"

``` r
names(pols_df)
```

    ##  [1] "year"            "month"           "gov_gop"         "sen_gop"        
    ##  [5] "rep_gop"         "gov_dem"         "sen_dem"         "rep_dem"        
    ##  [9] "president"       "close"           "unemployment(%)"

Pols-month contains variables:“year”, “month”, “gov_gop”, “sen_gop”,
“rep_gop”, “gov_dem”, “sen_dem”, “rep_dem” and “president”. Snp_df
contains variables: “year”, “month” and “close”. Unemployment_df
contains variables: “year”, “month” and “unemployment(%)”.

The resulting dataset spans from 1947 to 2015 and contains 822
observations, each with 11 features. It contains variables: “year”,
“month”, “gov_gop”, “sen_gop”, “rep_gop”, “gov_dem”, “sen_dem”,
“rep_dem”, “president”, “close” and “unemployment(%)”.

# Problem 2

## Clean the Mr. Trash Wheel sheet.

``` r
mrtrash_df = 
  read_excel("./trash_collection_data/202409 Trash Wheel Collection Data.xlsx",
             sheet = "Mr. Trash Wheel",
             skip = 1,
             na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  filter(!is.na(dumpster) & !is.na(weight_tons)) |>
  mutate(sports_balls = as.integer(round(sports_balls))) |>
  mutate(trash_wheel = "Mr. Trash Wheel") |>
  mutate(year = as.integer(year))
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

## Clean the Professor Trash Wheel dataset.

``` r
protrash_df = 
  read_excel("./trash_collection_data/202409 Trash Wheel Collection Data.xlsx",
             sheet = "Professor Trash Wheel",
             skip = 1,
             na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  filter(!is.na(dumpster) & !is.na(weight_tons)) |>
  mutate(trash_wheel = "Professor Trash Wheel") |>
  mutate(year = as.integer(year))
```

## Clean the Gwynnda Trash Wheel dataset.

``` r
gwytrash_df = 
  read_excel("./trash_collection_data/202409 Trash Wheel Collection Data.xlsx",
             sheet = "Gwynnda Trash Wheel",
             skip = 1,
             na = c("NA", ".", "")) |>
  janitor::clean_names() |>
  filter(!is.na(dumpster) & !is.na(weight_tons)) |>
  mutate(trash_wheel = "Gwynnda Trash Wheel") |>
  mutate(year = as.integer(year))
```

# Combine the three dataset.

``` r
trash_data <- bind_rows(mrtrash_df, protrash_df, gwytrash_df)
```

The resulting data has 1032 observations, each with 17 variables. The
key variables are dumpster, month, year, date, weight_tons,
volume_cubic_yards, plastic_bottles, polystyrene, cigarette_butts,
glass_bottles, plastic_bags, wrappers, sports_balls, homes_powered, x15,
x16, trash_wheel.

The total weight of trash collected by Professor Trash Wheel is 246.74.
The total number of cigarette butts collected by Gwynnda in June of 2022
is 6.2392^{5}.

# Problem 3

Create a single, well-organized dataset with all the information
contained in these data files. To that end: import, clean, tidy, and
otherwise wrangle each of these datasets; check for completeness and
correctness across datasets (e.g. by viewing individual datasets and
monitoring warning messages); merge to create a single, final dataset;
and organize this so that variables and observations are in meaningful
orders.
